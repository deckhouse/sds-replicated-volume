---
alwaysApply: false
description: "Authoring, editing, and reviewing Flant Interpretable Rules Documents (FIRDs)."
globs:
  - "**/FIRD-*.mdc"
  - "**/ARD-*.mdc"
---

# FIRD-CORE-9: Authoring FIRDs

**Draft thesis**:
- Под `# ...` (до первого `##`) всегда идёт преамбула: 1–2 абзаца “abstract/intro” в стиле RFC.
- Преамбула отвечает на вопросы:
  - “Что это за FIRD и какую задачу решает?”
  - “Кому адресовано (в первую очередь *FIRD contributor*)?”
  - “Как читать документ (какие ключевые разделы/темы)?”
- В преамбуле дать 1–2 “несущие” ссылки:
  - на значения нормативных слов (ссылка на [FIRD-CORE-1#normative-words]);
  - на то, что интерпретация FIRD и правила информативности/малформедности определены в FIRD-CORE-1/2/3.
- В преамбуле НЕ пытаться:
  - описывать применимость через длинные правила (для этого есть `## Scope` и frontmatter);
  - вставлять “много требований” (требования должны жить в тематических секциях; преамбула — навигация и краткое описание).
- Если по каким-то причинам в конкретном FIRD нет `## Scope`, то прямо в преамбуле должен быть краткий scope statement (1–3 предложения), чтобы читатель не гадал, на что документ распространяется.
- Преамбула может (и часто должна) коротко объяснить “почему этот документ существует” (1–2 предложения), но глубокий контекст лучше вынести в `[INFORMATIVE] Background`.
- В преамбуле можно использовать термины, но если они критичны — определить в `## 1. Terminology` или дать короткое inline-определение (по правилам секции 6.5).

## Scope

**Draft thesis**:
- Зафиксировать, что этот FIRD регулирует именно **написание** FIRDs (authoring): создание, редактирование, рефакторинг, ревью текста FIRD как *Work product*.
- Уточнить, что “authoring” включает:
  - проектирование структуры документа;
  - формулировку требований (normative statements);
  - оформление ссылок/якорей/примеров/информативных частей;
  - подготовку FIRD к стабильным ссылкам и дальнейшему сопровождению.
- Обозначить целевую аудиторию: *FIRD contributor* (как частный случай *FIRD conformer*: *FIRD user* или *FIRD agent*), который пишет или меняет FIRD.
- Сформулировать цели скоупа:
  - требования должны быть исполнимыми и проверяемыми;
  - документ должен быть понятен без догадок;
  - структура и оформление должны поддерживать стабильные ссылки и долгосрочное сопровождение.
- Явно проговорить только те исключения, которые реально уточняют границы (см. правила секции 3.3):
  - этот FIRD не задаёт правила интерпретации и применения требований во время выполнения задач; это определено в FIRD-CORE-1/2/3;
  - этот FIRD не определяет английские языковые конвенции; это в [FIRD-CORE-8].

## Status of this FIRD

**Draft thesis**:
- Эта секция описывает статус **конкретно FIRD-CORE-9**, а не “шаблон статуса для всех FIRDs” (шаблон/правила — в 3.6.1).
- В финальном документе тут должно быть коротко (обычно 1 строка + максимум 1–2 предложения пояснения):
  - Draft / Stable / Deprecated / Replaced.
- Пока документ в процессе — логично поставить “Draft.” и 1–2 предложения “actively evolving; do not rely on stability” (без даты/версий).
- Важно: даже на стадии черновика дисциплина полезна — не превращать Status в “второй Scope” и не писать здесь метаданные/историю.
- Запрещённый контент для Status (и почему) должен быть перечислен здесь кратко, а полно — в 3.6.1:
  - не писать применимость/границы (это `## Scope`, преамбула, frontmatter);
  - не писать ревизии/версии/авторство/ответственных/мейнтенеров (это решается git + PR/MR + CODEOWNERS и внешними процессами);
  - не писать требования (если что-то важно — это требования/scope, а не статус).
- В будущем: когда документ станет стабильным, заменить “Draft” на “Stable” и убрать “черновые” оговорки.

## 1. Terminology

**Draft thesis**:
- Цель секции: убрать неоднозначность терминов, которые нужны именно для authoring-правил (и которые будут использоваться во всех последующих секциях).
- Обязательные определения, которые стоит зафиксировать:
  - *FIRD contributor* (см. [FIRD-CORE-1#terms]).
  - *FIRD file* — файл, содержащий FIRD (обычно `.mdc`, но термин должен быть абстрактным: “файл, который содержит FIRD документ”).
  - *FIRD document* — markdown-документ, распознаваемый как FIRD по правилам идентификации базового ядра (ссылка на [FIRD-CORE-1#fird-identification]).
  - *Frontmatter* — YAML блок в начале файла, используемый для applicability; правила формата см. [FIRD-CORE-1#frontmatter].
  - *Body* — всё содержимое после *Frontmatter* (включая H1 и последующие секции).
  - *Preamble* — текст сразу под H1 и до первого H2.
- Термины для темы переносимости:
  - *Portable FIRD* — FIRD, который не зависит от локальных соглашений конкретной среды (в частности не ссылается на `LOCAL`; см. [FIRD-CORE-7]).
  - *Local FIRD* — FIRD серии `LOCAL`, который описывает локальные правила среды/инструментов.
- Прямо в Terminology добавить принцип: базовые значения нормативных слов (`MUST`, `SHOULD`, `MAY`, и т.д.) не определяются здесь, а задаются в [FIRD-CORE-1#normative-words].
- Зафиксировать стиль определения терминов:
  - формат определения: ``*<term>* — <definition>``;
  - краткость, но достаточность для устранения двусмысленности;
  - если термин зависит от другого FIRD — ссылаться на него, а не копировать.
- Продумать, нужно ли здесь определять “Definition import” как термин (например, “Definition import”), или это оставить на 3.4/6.4.
- Зафиксировать, что термины могут определяться inline по ходу документа (см. 6.5), но если термин используется в нескольких секциях — его надо поднять в Terminology.

## 2. FIRD document model and top-of-document conventions

### 2.1 FIRD as a document vs FIRD as a file

**Draft thesis**:
- Сформулировать “модель” в явном виде:
  - файл содержит frontmatter + markdown-документ;
  - FIRD идентифицируется по H1 и его формату (по базовым правилам ядра);
  - *FIRD title* — первая H1 после *Frontmatter*.
- Отдельно пояснить практическую разницу:
  - *Frontmatter* — метаданные применимости;
  - содержательные правила и требования живут в *Body*.
- Зафиксировать, что при authoring мы проектируем файл так, чтобы он был:
  - валиден как FIRD (правильный H1, корректная структура);
  - удобен для применения правил applicability (*Frontmatter* присутствует и корректен);
  - безопасен относительно “malformed” условий (например, не вставлять all-caps нормативные слова в headings/YAML values).
- Зафиксировать рабочие определения *Body* и *Preamble* (чтобы дальше можно было ссылаться без путаницы).
- Вставить короткий (информативный) абзац с “картой файла”:
  - `frontmatter -> H1 -> preamble -> H2 sections -> ...`.

### 2.2 Frontmatter: interpretation vs authoring

**Draft thesis**:
- Ключевая мысль: различать “можно интерпретировать документ без frontmatter” и “как писать FIRD правильно”.
- В authoring-правилах зафиксировать: *Frontmatter* должен быть **всегда** (даже если пустой по смыслу).
- Обосновать “зачем всегда”:
  - единообразие;
  - предсказуемая применимость;
  - проще автоматизировать и проверять;
  - проще сопровождать FIRDs без исключений.
- Указать минимальные требования к *Frontmatter*:
  - расположен первым в файле;
  - `---` … `---`;
  - YAML mapping;
  - стандартные поля из [FIRD-CORE-1#frontmatter] (даже если не все используются).
- Прописать (как guidance) как выбирать `alwaysApply`, `globs`, `description` (ссылка на 2.5 и [FIRD-CORE-3#applicability]).
- Отдельный “опасный угол”:
  - в YAML values нельзя писать all-caps нормативные слова, иначе можно получить malformed по [FIRD-CORE-1#normative-words-headings];
  - если нужно упомянуть `MUST` и т.п. в `description`, то либо избегать, либо писать как литерал в backticks (но лучше избегать).
- Рекомендовать минимальный “дефолтный” frontmatter для новых FIRDs (например: `alwaysApply: false` + `description:`), чтобы документ не был “невидимым”.

### 2.3 FIRD title and preamble rules (“what goes under H1”)

**Draft thesis**:
- Зафиксировать два обязательных элемента вокруг H1:
  1) сам H1 по формату FIRD;
  2) преамбула (abstract/intro) сразу после H1.
- Пояснить, что преамбула делает:
  - быстро говорит читателю “что это” и “зачем”;
  - задаёт навигацию (какие важные секции дальше);
  - при необходимости — содержит scope statement (если нет `## Scope`).
- Чётко определить правила “где scope живёт”:
  - если есть `## Scope` — scope statement в преамбуле может быть очень коротким или отсутствовать;
  - если `## Scope` нет — scope statement в преамбуле обязателен.
- Обозначить запреты/антипаттерны для преамбулы:
  - не превращать в длинный background (для этого есть `[INFORMATIVE] Background`);
  - не прятать требования внутри преамбулы;
  - не дублировать frontmatter.
- Дать guidance по стилю преамбулы:
  - короткие абзацы;
  - избегать “маркетинговых” формулировок;
  - конкретика о содержании документа.
- Включить правило про заголовок H1:
  - должен быть точным и описательным;
  - не должен содержать all-caps нормативные слова (см. базовые правила малформедности).
- Прописать, что в преамбуле допустимо 1–2 кратких ссылки на другие FIRDs, но “ссылка как зависимость” должна быть оформлена по правилам ссылок (6.4), чтобы не было неявных зависимостей.

### 2.4 Reference tokens, series, and portability intent

**Draft thesis**:
- Описать роль reference token как стабильного идентификатора.
- Рекомендации:
  - не менять токен после того, как документ начал использоваться как зависимость;
  - при сильных несовместимых изменениях рассмотреть новый токен и “Replaced by …” через Status.
- Ввести понятие “intent переносимости”:
  - если FIRD предполагается portable — он не должен зависеть от локальных правил (см. [FIRD-CORE-7]);
  - если FIRD локальный — он должен жить в серии `LOCAL` и явно считаться непереносимым.
- Подготовить почву под правило “non-LOCAL не ссылается на LOCAL” (конкретное правило и детали — в [FIRD-CORE-7]).
- Добавить (информативно) пару типичных ошибок:
  - portable FIRD случайно ссылается на local;
  - серия выбрана неправильно и документ тащит лишние зависимости.

### 2.5 Applicability metadata (`alwaysApply`, `globs`, `description`)

**Draft thesis**:
- Дать *FIRD contributor* понятную модель:
  - как FIRD agent определяет Applicable FIRDs по frontmatter (ссылка на [FIRD-CORE-3#applicability]);
  - почему authoring должен учитывать applicability.
- Описать, когда выбирать:
  - `alwaysApply: true` — только для действительно фундаментальных FIRDs;
  - `globs` — когда применимость зависит от путей/типов файлов;
  - `description` — когда применимость зависит от intent задачи.
- Подчеркнуть риск:
  - `globs` и `description` не полностью стандартизированы (ссылка на [FIRD-CORE-1#known-issues]);
  - критичные границы стоит продублировать в `## Scope` и/или преамбуле.
- Антипаттерны:
  - “весь смысл применимости спрятали в description”;
  - “слишком широкий alwaysApply”.
- Прописать, что автор должен избегать “скрытых требований” в description (и тем более не вставлять туда all-caps нормативные слова).
- Guidance по тестированию applicability:
  - мысленные примеры задач: когда должно применяться / когда нет;
  - проверить, что scope текста и applicability метаданных не противоречат.

**Draft thesis**:
- В секции 2 в целом мы фиксируем “техническую модель FIRD как документа/файла” и правила “верхушки документа” (frontmatter → H1 → preamble → scope).
- В финальном тексте секции 2 важно:
  - не скатиться в повтор FIRD-CORE-1 (мы не переписываем его, а ссылаемся);
  - дать автору конкретные “правила написания”, а не только теорию.
- Контрольные вопросы для автора:
  - корректен ли *FIRD title* и токен?
  - есть ли *Frontmatter* и корректен ли он?
  - понятен ли scope из scope section или преамбулы?
  - не создаём ли accidental malformed (нормативные слова в headings/YAML values)?
  - как будет определяться applicability?

## 3. Standard document structure for FIRDs

### 3.1 YAML frontmatter

**Draft thesis**:
- Правило authoring-уровня: frontmatter присутствует всегда и стоит первым в файле.
- Минимальный набор стандартных полей:
  - `alwaysApply` (boolean),
  - `description` (string, без “скрытых требований”),
  - `globs` (string или list).
- Пояснить, что отсутствие этих полей в authoring недопустимо (даже если пустые/false) — это упрощает единообразие.
- Guidance по заполнению:
  - узкоспециализированный документ — `alwaysApply: false` и `description`;
  - применимость по файлам — `globs`;
  - действительно всегда применим — осознанно `alwaysApply: true`.
- Чеклист качества:
  - YAML mapping корректен;
  - delimiters на отдельных строках;
  - нет all-caps нормативных слов в values;
  - `globs/description` не противоречат `## Scope`.
- Принцип: frontmatter — машиночитаемая применимость, `## Scope` — человеко-понятная граница; они должны совпадать по смыслу.
- Не стандартизируем glob dialect; ссылаться на known issues в базовом ядре.

### 3.2 Preamble (under `# ...`)

**Draft thesis**:
- Описать ожидания:
  - краткий abstract;
  - (иногда) scope statement;
  - (иногда) краткая навигация по разделам/темам.
- Чего не должно быть:
  - больших списков требований;
  - “политики применимости” вместо frontmatter/scope;
  - детального background/rationale.
- Дать 2–3 шаблонные формулировки (как информативные микропримеры).
- Преамбула должна быть читаема без контекста: открыв файл, читатель сразу понимает назначение.
- Преамбула — UX документа, а не место для скрытых правил.

### 3.3 Scope (explicit section vs scope-in-preamble)

**Draft thesis**:
- Правило решения:
  - если документ не тривиален или есть риск неверной применимости — делать явный `## Scope`;
  - если документ очень короткий — допускается scope statement в преамбуле без отдельной секции.
- Scope должен содержать:
  - “applies to …” (включающее множество);
  - условия применения (если есть).
- Scope **может** содержать явные исключения (“does not apply to …”) только когда:
  - исключение является подмножеством включающего множества; или
  - без явного исключения разумный читатель может неверно расширить границы применения (то есть исключение реально снимает двусмысленность).
- Антипаттерн: перечислять “что не входит в scope” про вещи, которые и так не могли входить в описанное включающее множество.
- Рекомендация: использовать конкретные критерии (типы *Work product*, действия, условия, исключения при необходимости).
- Scope согласовать с frontmatter applicability.

### 3.4 Terminology section in a FIRD

**Draft thesis**:
- Когда нужна отдельная Terminology:
  - новые/специфические термины;
  - требования опираются на точные определения;
  - terms of art.
- Два режима “импорта определений”:
  1) Импорт “всех определений” (базовый словарь):
     - только внутри секции Terminology;
     - явной ссылкой на секцию терминов другого FIRD (token+`#anchor`);
     - смысл: “для понимания этого документа используйте определения оттуда”.
  2) Импорт одного определения/термина:
     - можно в Terminology (точечная ссылка);
     - можно inline по ходу (см. 6.5), если термин локален — но поднимать наверх при расширении использования.
- Дисциплина: импорт — не копипаст, а ссылка на источник и ясность “что именно импортируем”.
- Если термин критичен для требований — его определение должно быть легко найдено и однозначно.
- Guidance по first mention: не вводить термин “вдруг” без определения/ссылки.

### 3.5 Where requirements live: topical sections vs single `## Requirements`

**Draft thesis**:
- `## Requirements` допустим только для очень короткого FIRD, где это единственный смысловой блок требований.
- Для всего остального:
  - требования группируются по темам в соответствующих секциях;
  - названия секций отражают предмет требования.
- Зачем:
  - легче находить нормы;
  - меньше риск конфликтов/дубликатов;
  - проще сопровождать.
- Паттерны:
  - списки bullet-ов часто лучше, чем длинные абзацы;
  - одно требование — один пункт, если это повышает читаемость (эвристика, детали в 4.4).
- Ссылки на зависимости оформлять по правилам ссылок (6.4).

### 3.6 Standard auxiliary and informative sections

#### 3.6.1 Status of this FIRD

**Draft thesis**:
- Status помогает понять зрелость/актуальность текста.
- Мягко стандартизировать статусы: Draft / Stable / Deprecated / Replaced.
- Жёстко описать, что нельзя писать в Status:
  - нельзя описывать scope/applicability — это преамбула, `## Scope`, frontmatter;
  - нельзя писать “как использовать документ” — это требования/пояснения;
  - нельзя писать ревизии/версии/авторство/ответственных/контакты — это внешние процессы (git + PR/MR + CODEOWNERS);
  - нельзя писать требования.
- Где применять:
  - рекомендуется для всех FIRDs, кроме совсем микроскопических (где может быть 1 строка или можно опустить).
- Как писать:
  - коротко (1 строка + 0–2 предложения);
  - без дат/версий;
  - при Replaced — ссылка на заменяющий FIRD (учитывая boundary серий, см. [FIRD-CORE-7]).

#### 3.6.2 [INFORMATIVE] Background

**Draft thesis**:
- Контекст, если без него требования выглядят произвольно.
- Что писать:
  - какую проблему решаем,
  - какая исходная ситуация,
  - почему нужен этот FIRD/раздел,
  - внешние ограничения/предпосылки.
- Чего избегать:
  - требования;
  - scope.
- Background может быть коротким или отсутствовать.

#### 3.6.3 [INFORMATIVE] Rationale

**Draft thesis**:
- Объяснить “почему так”, если есть trade-offs или неочевидность.
- Что писать:
  - причины/мотивы;
  - альтернативы и почему отказались;
  - риски/компромиссы.
- Избегать скрытых требований: обязательства должны быть в нормативном тексте.
- Rationale может быть отдельной секцией или информативными блоками внутри тематических секций.

#### 3.6.4 [INFORMATIVE] Examples

**Draft thesis**:
- Политика примеров:
  - Вариант A по умолчанию:
    - микропримеры рядом с правилами (1–10 строк, 1 паттерн);
    - отдельная Examples секция — 1–3 комплексных примера.
  - Вариант B только для очень короткого FIRD:
    - все примеры собрать в Examples, чтобы не распылять текст.
- Примеры должны быть явно информативными (по механизмам ядра).
- Критерии качества: минимальность, точность, устойчивость к устареванию.
- Предупреждение: примеры не могут быть единственным местом, где описано обязательное поведение.

#### 3.6.5 [INFORMATIVE] Known issues / Limitations

**Draft thesis**:
- Фиксировать известные проблемы/неопределённости/ограничения.
- Не превращать limitations в скрытый scope.
- Не писать требования или обещания поддержки; это процессы, не текст.

**Draft thesis**:
- Секция 3.6 — “каталог” вспомогательных секций и правила их безопасного использования.
- Разделить статус (не информативный) и информативные секции (background/rationale/examples/known issues).
- В финальном тексте добавить микропримеры “хороший/плохой статус” и корректный example-block.

## 4. Normative language and requirement design

### 4.1 Normative key words: use by reference only

**Draft thesis**:
- Значения нормативных слов определены только в [FIRD-CORE-1#normative-words].
- Запрет: определения/пересказы значений `MUST`/`SHOULD`/`MAY` и т.п. не должны появляться ни в каких других FIRDs, кроме FIRD-CORE-1; остальные должны только ссылаться.
- Зачем:
  - единый источник истины;
  - избегаем дрейфа смысла;
  - проще обновлять систему.
- Если хочется объяснить “почему тут SHOULD, а не MUST” — это место для rationale, а не для новых определений.
- Нормативность создаётся только all-caps ключевыми словами в обычной прозе; избегать квазинормативности (“strongly recommended” вместо SHOULD).

### 4.2 Where normative words do not create requirements

**Draft thesis**:
- Ключевые слова не создают требований в:
  - headings,
  - YAML values,
  - inline code и code blocks,
  - Informative сегментах.
- Практический вывод:
  - нельзя рассчитывать на требования, написанные только в примере или rationale;
  - если поведение обязательно — оно должно быть нормативной фразой вне Informative.
- Ловушка:
  - all-caps нормативные слова в заголовке/YAML могут сделать документ malformed.
- Чеклист:
  - где я случайно использовал MUST/SHOULD как текст?
  - безопасные варианты: backticks, перенос в обычный текст, или пометка Informative.

### 4.3 Informative vs normative: designing for executable conformance

**Draft thesis**:
- Центральные критерии качества:
  1) акторы могут однозначно выполнить требования;
  2) акторы одинаково понимают секцию.
- Допускается перемешивание требований, определений, rationale и примеров, но требования должны быть легко выделимы.
- Если секция сложная — разбить/структурировать, чтобы требования не терялись.
- Informative — контекст и trade-offs, но не источник обязательств.
- Если informative конфликтует с normative — приоритет у normative, конфликт лучше явно отметить.

### 4.4 Requirement quality (checkability and clarity)

**Draft thesis**:
- Критерии хорошего требования:
  - конкретное действие/ограничение;
  - понятный адресат;
  - условия применения (если не всегда);
  - отсутствие двусмысленных слов без определения.
- Проверяемость:
  - можно ли при ревью понять, выполнено ли требование;
  - можно ли валидировать часть правил автоматом (frontmatter, заголовки, anchors).
- Атомарность как эвристика: если требование трудно читать/проверять — разделить.
- Плохие паттерны:
  - составные требования без ясности;
  - скрытые условия;
  - термины без определения.
- Связь с терминологией: если термин используется в требованиях — он должен быть определён (Terminology или inline).

### 4.5 Addressing responsibility and avoiding unnecessary duplication

**Draft thesis**:
- Не дублировать требования “для *FIRD user*” и “для *FIRD agent*” без необходимости (риск рассинхронизации).
- Если правило одинаково — адресовать `FIRD conformers`.
- Разделять на `A FIRD user ...` и `A FIRD agent ...` только когда различается ответственность/возможность/процесс/последствия.
- Риск безадресных требований: они могут интерпретироваться как правила интерпретации для всех *FIRD conformers*.
- Мини-чеклист:
  - кто реально может выполнить?
  - если оба — `FIRD conformers`?
  - если только *FIRD agent* — `A FIRD agent ...`;
  - если только *FIRD user* — `A FIRD user ...`.

**Draft thesis**:
- Раздел 4 — правила написания требований:
  - корректное использование нормативных слов;
  - где они не работают;
  - как смешивать normative и informative без потери исполнимости.
- В финальном тексте не повторять FIRD-CORE-1, а ссылаться на него и давать authoring-практики.

## 5. Language and section drafting (core)

### 5.1 English requirement for FIRDs

**Draft thesis**:
- Финальный текст FIRDs пишется на английском.
- Детальные языковые и стилистические конвенции (US spelling, пунктуация и т.д.) вынесены в [FIRD-CORE-8].

### 5.2 Section drafting checklist (applies to any heading level)

**Draft thesis**:
- Чеклист применим к любой секции/подсекции (`##`, `###`, `####`, …), а не требование заводить подпункты.
- Вопросы для автора:
  - нужен ли intro/abstract к секции?
  - нужен ли background?
  - нужны ли определения/термины?
  - где требования и можно ли их легко найти?
  - нужен ли rationale?
  - нужны ли примеры?
- Допускается перемешивание (requirements/rationale/definitions/examples), но требования должны быть чётко отделимы.
- Ключевая цель:
  - (1) акторы могут выполнить требования,
  - (2) акторы понимают секцию одинаково.
- Когда чеклист не нужен: для коротких очевидных секций иногда достаточно одного абзаца требований.
- Связь с примерами:
  - микропример рядом, если поясняет конкретное правило;
  - комплексный пример — в Examples/Appendix.

### 5.3 Literals and placeholders (non-quotation part)

**Draft thesis**:
- Стандарт для литералов:
  - inline code для коротких идентификаторов/токенов/полей (`token`, `#anchor`, `alwaysApply`);
  - fenced code blocks для многострочных примеров или “кусочков файла”.
- Предупреждение про риск:
  - если автор изменит команду/путь/идентификатор в примере “для красоты”, читатель может воспроизвести неверно.
- Рекомендация:
  - в примерах явно отделять placeholders (`<placeholder>`) от буквальных значений.
- Безопасное правило: если пример должен быть буквальным — он должен быть оформлен так, чтобы читатель не спутал его с псевдокодом.
- Технические правила оформления цитат/цитирования — в разделе 7 (а языковая пунктуация вокруг кавычек — в [FIRD-CORE-8]).

## 6. Markdown, document elements, references, and terminology in practice

### 6.1 Markdown baseline and allowed syntax

**Draft thesis**:
- Зафиксировать “стандарт Markdown” для FIRDs лаконично:
  - базовая грамматика: CommonMark Markdown (как минимальный общий знаменатель);
  - разрешённые и ожидаемые добавления FIRDs поверх CommonMark:
    - YAML *Frontmatter* (как структурный элемент FIRD, см. [FIRD-CORE-1#frontmatter]);
    - raw HTML только для стабильных якорей вида `<a id="..."></a>` (см. 6.3);
    - fenced code blocks (CommonMark) и токен `example` для пометки Informative (см. [FIRD-CORE-1#informative-content]).
- Запретить (как authoring-policy) опираться на renderer-specific расширения Markdown, кроме тех, что явно определены FIRDs (например, механики Informative).

### 6.2 Heading rules and numbering conventions

**Draft thesis**:
- Ограничения на заголовки:
  - не использовать all-caps нормативные слова в headings (если нужно упомянуть — как литерал в backticks);
  - не вставлять all-caps нормативные слова в YAML values.
- Соглашения по нумерации (нормативно для authoring):
  - все заголовки уровня 2 и ниже (`##`, `###`, `####`, …) ДОЛЖНЫ быть нумерованы иерархически (decimal scheme: `## 1. ...`, `### 1.1 ...`, `#### 1.1.1 ...`) **кроме** явно оговорённых “ненумеруемых” секций.
  - ненумеруемые секции уровня `##` (и их точные имена):
    - `Scope`
    - `Status of this FIRD`
    - `Overrides` (если присутствует в Work product FIRDs; см. [FIRD-CORE-4])
    - `## [INFORMATIVE] Appendix ...` (Appendices как отдельные информативные приложения)
  - ненумеруемые секции (`## Scope`, `## Status of this FIRD`, `## Overrides`) НЕ ДОЛЖНЫ иметь вложенных подзаголовков (чтобы не ломать правило “все H2+ нумерованы” ниже).
  - Для Appendices допускается структура с подзаголовками; если внутри Appendix есть подзаголовки, они ДОЛЖНЫ быть нумерованы с префиксом буквы приложения (например: `### A.1 ...`, `#### A.1.1 ...`).
- `## Scope` — особая секция и имя должно быть ровно “Scope” (см. [FIRD-CORE-1#scope-declaration]).
- Именование секций:
  - отражает предмет (не “Misc”);
  - подходит для ссылок.
- При переименовании думать о ссылках (см. 8.2).

### 6.3 Stable anchors (`<a id="..."></a>`)

**Draft thesis**:
- Когда нужны явные anchors:
  - для секций, на которые будут ссылаться;
  - для ключевых точек требований/терминов.
- Соглашение по id:
  - kebab-case;
  - семантические имена;
  - не привязывать к нумерации.
- Политика изменений:
  - не удалять/не переименовывать без необходимости;
  - при изменении — добавить новый anchor и оставить старый как алиас по возможности.
- Автогенерируемые markdown anchors ненадёжны; явные anchors предпочтительнее.

### 6.4 Cross-FIRD references and importing definitions

**Draft thesis**:
- Типы ссылок:
  - ссылка на документ (token),
  - ссылка на секцию (token+`#anchor`).
- Практика:
  - если зависимость от конкретного раздела — ссылаться на `#anchor`;
  - ссылка на весь документ — тяжёлая зависимость, использовать осознанно.
- Импорт определений:
  - “все определения” — только в Terminology (3.4);
  - одно определение — Terminology или inline (6.5).
- Напоминание: если ссылка нужна для выполнения требования — это dependency, агент должен уметь загрузить.
- Избегать “намёков”; всегда давать точный token и по возможности `#anchor`.
- Ссылка на `LOCAL` должна учитывать boundary-правила (см. [FIRD-CORE-7]).

### 6.5 Defining terms inline and when to promote them upward

**Draft thesis**:
- Inline-определения допустимы, когда термин локален одной секции.
- Формы:
  - “Term — definition” внутри секции;
  - пояснение при первом упоминании;
  - точечная ссылка на источник определения (другой FIRD).
- Правило продвижения:
  - если термин используется в нескольких секциях или ключевой для требований — вынести в Terminology.
- Риски:
  - два разных определения одного термина;
  - термин в требованиях до определения.
- Техника ревью: искать terms of art и проверять, что они определены ровно один раз.

### 6.6 Term typography: italics-only

**Draft thesis**:
- Требование к оформлению терминов (техническое, Markdown):
  - в обычной прозе (не в code spans/blocks) каждое использование термина ДОЛЖНО быть выделено курсивом (Markdown italics), включая:
    - определение термина в Terminology;
    - первое и каждое последующее употребление термина в документе.
  - курсив ДОЛЖЕН использоваться только для терминов; никакой другой текст курсивом не выделять.
- Допущение для литералов:
  - если термин должен появиться как литерал в inline code или code block (например, как часть примера), он может быть оформлен как литерал (в backticks/коде) вместо курсива.

### 6.7 Informative content mechanisms and patterns

**Draft thesis**:
- Механики Informative:
  - `[INFORMATIVE]` в заголовке,
  - `> [!INFORMATIVE]` callouts,
  - `example` fenced code,
  - `INFORMATIVE:` ссылки.
- Informative помогает понять intent и trade-offs, но не создаёт требований.
- Антипаттерны:
  - требования спрятаны только в примерах;
  - rationale выглядит как требование;
  - Informative блоки вводят в заблуждение.
- Рекомендация: минимизировать `MUST/SHOULD` в Informative, чтобы не смущать читателя.
- Если informative конфликтует с normative — приоритет у normative, конфликт лучше явно отметить.

### 6.8 Examples: allowed forms, placement strategy, and formatting expectations

**Draft thesis**:
- Политика примеров (A по умолчанию, B для коротких):
  - A: микропримеры рядом + 1–3 комплексных в Examples;
  - B: все примеры в Examples, если FIRD короткий.
- Допустимые формы:
  - inline,
  - подпункт под требованием (но явно Informative),
  - информативный callout,
  - fenced `example`,
  - секция `[INFORMATIVE] Examples`.
- Качество:
  - минимальные и точные;
  - явно Informative;
  - не единственный источник обязательств.
- Сопровождение:
  - при изменении требования проверять связанные примеры.

**Draft thesis**:
- Раздел 6 — справочник автора по элементам документа:
  - стандарт Markdown,
  - заголовки/нумерация,
  - anchors,
  - ссылки и импорт определений,
  - inline-термины,
  - информативные механики,
  - примеры.

## 7. Quotations, citations, and reference lists

### 7.1 Quotes: allowed forms and required attribution

**Draft thesis**:
- Техническое правило: любая дословная цитата (verbatim) ДОЛЖНА быть оформлена так, чтобы она не создавала требований и не делала документ malformed:
  - либо как Informative callout (`> [!INFORMATIVE]`) с Markdown blockquote;
  - либо как fenced code block, помеченный `example` (например, ```text example).
- Для любой дословной цитаты требуется явная атрибуция источника:
  - предпочтительно ссылкой на конкретное место: `[FIRD-...#anchor]` (если источник — FIRD);
  - либо внешней ссылкой/лейблом на внешний источник (см. 7.2).
- При сокращении цитаты обозначать пропуски явно (например, `...` или `[…]`) и не маскировать изменения.

### 7.2 External citations and `References` sections

**Draft thesis**:
- Если FIRD цитирует или ссылается на внешние документы (не FIRDs), зафиксировать минимальную механику:
  - использовать единый label для источника (например, `[RFC2119]`, `[RFC8174]`, `[BCP14]`) в тексте;
  - определить labels в отдельной секции `## [INFORMATIVE] References` (или `## [INFORMATIVE] External references`) как список Markdown links или reference-style links.
- Для FIRDs (внутренних ссылок) использовать формы ссылок по [FIRD-CORE-1#fird-references] и секции 6.4; не смешивать это с внешним references-форматом.

### 7.3 Avoiding accidental requirements and malformed documents when quoting

**Draft thesis**:
- Нормативные слова в all-caps внутри цитаты не должны становиться требованиями:
  - цитаты, содержащие `MUST/SHOULD/MAY` и т.п., размещать только внутри Informative механизмов (см. [FIRD-CORE-1#informative-content]).
- Никогда не цитировать текст так, чтобы all-caps нормативные слова оказались в headings или YAML values (см. [FIRD-CORE-1#normative-words-headings]).
- Если цитата содержит Markdown, который может быть неверно интерпретирован (например, случайно образует heading), предпочесть fenced code block.

## 8. Change management and review workflow

### 8.1 Editing discipline and internal consistency

**Draft thesis**:
- Любая правка требования может требовать правок: scope, terminology, rationale, examples, references.
- Мини-чеклист при правке:
  - не меняется ли смысл термина?
  - не появился ли конфликт со scope?
  - не устарели ли примеры?
  - не сломаны ли anchors/ссылки?
- Признаки, что нужен рефакторинг:
  - секция разрослась и стала нечитаемой;
  - появилось много условий — нужен явный Scope;
  - много повторяющихся определений — поднять в Terminology.
- При больших изменениях важно явно обозначать material semantic changes.

### 8.2 Renames, restructuring, and updating references

**Draft thesis**:
- Переименование секций/anchors/tokens — потенциально breaking change.
- Anchors:
  - не удалять/не переименовывать без необходимости;
  - при изменении — добавлять новый anchor, сохраняя старый.
- Tokens:
  - токен стабилен; менять крайне нежелательно;
  - при радикальной смене смысла — новый токен и “Replaced” статус.
- Обязательное сопровождение:
  - обновить все ссылки;
  - если невозможно — явно документировать миграцию.
- Типичная ошибка: переименовали секцию, забыли обновить ссылку в другом FIRD.

### 8.3 Cross-FIRD consistency checks (including informative conflicts)

**Draft thesis**:
- Два типа согласованности:
  1) нормативная (нет конфликтов требований),
  2) концептуальная (informative не вводит противоречивую картину).
- Проверять:
  - корректность ссылок `token` и `token#anchor`;
  - отсутствие скрытых требований в informative;
  - соблюдение boundary-правил серий (особенно `LOCAL`; см. [FIRD-CORE-7]);
  - корректность записи overrides (см. [FIRD-CORE-4]).
- Workflow:
  - при добавлении требования думать о пересечении с другими CORE FIRDs;
  - при пересечении — согласовать/скорректировать scope/обозначить конфликт.

### 8.4 Contributor checklists

#### 8.4.1 In-process self-check (always)

**Draft thesis**:
- Это чеклист “в процессе работы”: при каждом изменении в документе *FIRD contributor* сверяется **внутри текущего файла**.
- Обязательная дисциплина: каждую правку проверять на соответствие применимым требованиям из FIRD-CORE-* для *FIRD contributor* (включая требования о malformed, informative, references, series boundaries, English style и authoring-правила этого FIRD).
- Минимальные проверки на каждую правку:
  - не нарушены правила malformed (нормативные слова в headings/YAML values);
  - сохранена нумерация заголовков (и соблюдены исключения для ненумеруемых секций);
  - термины оформлены курсивом и только термины;
  - ссылки/якоря не сломаны;
  - если добавлена/изменена цитата — она оформлена по разделу 7 и явно Informative;
  - если изменено требование — проверены связанные examples/rationale/terminology/scope.

#### 8.4.2 Publication readiness check (only on explicit request)

**Draft thesis**:
- Это чеклист “готово публиковать”: полная сверка с CORE и со всем, что документ референсит/импортит.
- Важное workflow-правило для *FIRD agent*, действующего как *FIRD contributor*:
  - выполнять publication readiness check только по явной команде *FIRD user*.
- Содержание publication readiness check (когда запрошено):
  - полная проверка документа на соответствие применимым CORE FIRDs;
  - проверка, что все зависимости по ссылкам (не помеченным Informative) разрешимы и доступны;
  - проверка, что все references/anchors корректны и стабильны;
  - проверка series boundaries (включая запрет non-`LOCAL` → `LOCAL`);
  - проверка того, что scope согласован с frontmatter;
  - финальная проверка цитат/References секции (все citations имеют entries и наоборот).

**Draft thesis**:
- Раздел 8 описывает практику изменения FIRDs так, чтобы не ломались ссылки, не появлялись противоречия и сохранялась переносимость.

## [INFORMATIVE] Appendix A: Templates

**Draft thesis**:
- Копипастные шаблоны как `example` fenced code blocks, чтобы они были явно Informative.
- Минимальный набор:
  - “Minimal FIRD” (frontmatter + H1 + preamble + scope + terminology + тематические требования + status + placeholders).
  - “Short FIRD” (допускает `## Requirements` и вариант B по примерам).
  - “Status section template” (как писать Draft/Stable/Deprecated/Replaced, что включать/не включать).
- В шаблонах использовать placeholders (`<...>`).
- Избегать локальных ссылок на `LOCAL` в переносимых шаблонах.

## [INFORMATIVE] Appendix B: Examples

**Draft thesis**:
- 1–3 комплексных примера “хорошего FIRD”:
  - сложный пример (Scope + Terminology + тематические секции + micro-examples + rationale blocks + Examples);
  - очень короткий пример (с `## Requirements` и вариантом B);
  - (опционально) пример переносимости без ссылок non-LOCAL → LOCAL.
- Минимум один анти-пример:
  - `MUST` в заголовке → malformed;
  - требования спрятаны только в examples/rationale.
- Каждый пример:
  - явно Informative;
  - минимальный, но достаточный;
  - обновляется вместе с изменением правил.
